{"ast":null,"code":"import _defineProperty from\"/Users/kamei/Documents/Projects/Programs/Blockchain Project/KUChat/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/kamei/Documents/Projects/Programs/Blockchain Project/KUChat/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/kamei/Documents/Projects/Programs/Blockchain Project/KUChat/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/kamei/Documents/Projects/Programs/Blockchain Project/KUChat/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{useEffect,useState,useReducer}from'react';import Gun from'gun';import NavBar from\"../parts/NavBar\";// initialize gun locally\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var gun=Gun({peers:['http://localhost:3007/gun']});// create the initial state to hold the messages\nvar initialState={messages:[]};// Create a reducer that will update the messages array\nfunction reducer(state,message){return{messages:[message].concat(_toConsumableArray(state.messages))};}var PeerToPeer=function PeerToPeer(){/// the form state manages the form input for creating a new message\nvar _useState=useState({address:'',amount:''}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setForm=_useState2[1];// initialize the reducer & state for holding the messages array\nvar _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// when the app loads, fetch the current messages and load them into the state\n// this also subscribes to new data as it changes and updates the local state\nuseEffect(function(){var messages=gun.get('messages');messages.map().on(function(m){dispatch({address:m.address,amount:m.amount,createdAt:m.createdAt});});},[]);// set a new message in gun, update the local state to reset the form field\nfunction saveMessage(){var messages=gun.get('messages');messages.set({address:formState.address,amount:formState.amount,createdAt:Date.now()});setForm({address:'',amount:''});}// update the form state as the user types\nfunction onChange(e){setForm(_objectSpread(_objectSpread({},formState),{},_defineProperty({},e.target.name,e.target.value)));}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:30},children:[/*#__PURE__*/_jsx(\"input\",{onChange:onChange,placeholder:\"Name\",name:\"address\",value:formState.address}),/*#__PURE__*/_jsx(\"input\",{onChange:onChange,placeholder:\"Message\",name:\"amount\",value:formState.amount}),/*#__PURE__*/_jsx(\"button\",{onClick:saveMessage,children:\"Send Message\"}),state.messages.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:message.amount}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"From: \",message.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",message.createdAt]})]},message.createdAt);})]})})]});};export default PeerToPeer;","map":{"version":3,"sources":["/Users/kamei/Documents/Projects/Programs/Blockchain Project/KUChat/frontend/src/components/pages/p2ptest.jsx"],"names":["useEffect","useState","useReducer","Gun","NavBar","gun","peers","initialState","messages","reducer","state","message","PeerToPeer","address","amount","formState","setForm","dispatch","get","map","on","m","createdAt","saveMessage","set","Date","now","onChange","e","target","name","value","padding"],"mappings":"6oBAAA,OAASA,SAAT,CAAoBC,QAApB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,MAAOC,CAAAA,GAAP,KAAgB,KAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CAGA;6IACA,GAAMC,CAAAA,GAAG,CAAGF,GAAG,CAAC,CACdG,KAAK,CAAE,CACL,2BADK,CADO,CAAD,CAAf,CAMA;AACA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,QAAQ,CAAE,EADS,CAArB,CAIA;AACA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwBC,OAAxB,CAAiC,CAC/B,MAAO,CACLH,QAAQ,EAAGG,OAAH,4BAAeD,KAAK,CAACF,QAArB,EADH,CAAP,CAGD,CAED,GAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB;AACA,cAA6BX,QAAQ,CAAC,CAClCY,OAAO,CAAE,EADyB,CACrBC,MAAM,CAAE,EADa,CAAD,CAArC,wCAAOC,SAAP,eAAkBC,OAAlB,eAIE;AACA,gBAA0Bd,UAAU,CAACO,OAAD,CAAUF,YAAV,CAApC,4CAAOG,KAAP,iBAAcO,QAAd,iBAEA;AACA;AACAjB,SAAS,CAAC,UAAM,CACd,GAAMQ,CAAAA,QAAQ,CAAGH,GAAG,CAACa,GAAJ,CAAQ,UAAR,CAAjB,CACAV,QAAQ,CAACW,GAAT,GAAeC,EAAf,CAAkB,SAAAC,CAAC,CAAI,CACrBJ,QAAQ,CAAC,CACPJ,OAAO,CAAEQ,CAAC,CAACR,OADJ,CAEPC,MAAM,CAAEO,CAAC,CAACP,MAFH,CAGPQ,SAAS,CAAED,CAAC,CAACC,SAHN,CAAD,CAAR,CAKD,CAND,EAOD,CATQ,CASN,EATM,CAAT,CAWA;AACA,QAASC,CAAAA,WAAT,EAAuB,CACrB,GAAMf,CAAAA,QAAQ,CAAGH,GAAG,CAACa,GAAJ,CAAQ,UAAR,CAAjB,CACAV,QAAQ,CAACgB,GAAT,CAAa,CACXX,OAAO,CAAEE,SAAS,CAACF,OADR,CAEXC,MAAM,CAAEC,SAAS,CAACD,MAFP,CAGXQ,SAAS,CAAEG,IAAI,CAACC,GAAL,EAHA,CAAb,EAKAV,OAAO,CAAC,CACNH,OAAO,CAAE,EADH,CACOC,MAAM,CAAE,EADf,CAAD,CAAP,CAGD,CAED;AACA,QAASa,CAAAA,QAAT,CAAkBC,CAAlB,CAAqB,CACnBZ,OAAO,gCAAMD,SAAN,wBAAkBa,CAAC,CAACC,MAAF,CAASC,IAA3B,CAAkCF,CAAC,CAACC,MAAF,CAASE,KAA3C,GAAP,CACD,CAED,mBACI,wCACE,KAAC,MAAD,IADF,cAEE,mCACA,aAAK,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAX,CAAZ,wBACI,cACI,QAAQ,CAAEL,QADd,CAEI,WAAW,CAAC,MAFhB,CAGI,IAAI,CAAC,SAHT,CAII,KAAK,CAAEZ,SAAS,CAACF,OAJrB,EADJ,cAOI,cACI,QAAQ,CAAEc,QADd,CAEI,WAAW,CAAC,SAFhB,CAGI,IAAI,CAAC,QAHT,CAII,KAAK,CAAEZ,SAAS,CAACD,MAJrB,EAPJ,cAaI,eAAQ,OAAO,CAAES,WAAjB,0BAbJ,CAeQb,KAAK,CAACF,QAAN,CAAeW,GAAf,CAAmB,SAAAR,OAAO,qBAC1B,oCACI,oBAAKA,OAAO,CAACG,MAAb,EADJ,cAEI,+BAAWH,OAAO,CAACE,OAAnB,GAFJ,cAGI,8BAAUF,OAAO,CAACW,SAAlB,GAHJ,GAAUX,OAAO,CAACW,SAAlB,CAD0B,EAA1B,CAfR,GADA,EAFF,GADJ,CA+BL,CAvED,CAyEA,cAAeV,CAAAA,UAAf","sourcesContent":["import { useEffect, useState, useReducer } from 'react'\nimport Gun from 'gun'\nimport NavBar from \"../parts/NavBar\";\n\n\n// initialize gun locally\nconst gun = Gun({\n  peers: [\n    'http://localhost:3007/gun'\n  ]\n})\n\n// create the initial state to hold the messages\nconst initialState = {\n  messages: []\n}\n\n// Create a reducer that will update the messages array\nfunction reducer(state, message) {\n  return {\n    messages: [message, ...state.messages]\n  }\n}\n\nconst PeerToPeer = () => {\n    /// the form state manages the form input for creating a new message\n    const [formState, setForm] = useState({\n        address: '', amount: ''\n      })\n    \n      // initialize the reducer & state for holding the messages array\n      const [state, dispatch] = useReducer(reducer, initialState)\n    \n      // when the app loads, fetch the current messages and load them into the state\n      // this also subscribes to new data as it changes and updates the local state\n      useEffect(() => {\n        const messages = gun.get('messages')\n        messages.map().on(m => {\n          dispatch({\n            address: m.address,\n            amount: m.amount,\n            createdAt: m.createdAt\n          })\n        })\n      }, [])\n    \n      // set a new message in gun, update the local state to reset the form field\n      function saveMessage() {\n        const messages = gun.get('messages')\n        messages.set({\n          address: formState.address,\n          amount: formState.amount,\n          createdAt: Date.now()\n        })\n        setForm({\n          address: '', amount: ''\n        })\n      }\n    \n      // update the form state as the user types\n      function onChange(e) {\n        setForm({ ...formState, [e.target.name]: e.target.value  })\n      }\n    \n      return (\n          <>\n            <NavBar />\n            <main>\n            <div style={{ padding: 30 }}>\n                <input\n                    onChange={onChange}\n                    placeholder=\"Name\"\n                    name=\"address\"\n                    value={formState.address}\n                />\n                <input\n                    onChange={onChange}\n                    placeholder=\"Message\"\n                    name=\"amount\"\n                    value={formState.amount}\n                />\n                <button onClick={saveMessage}>Send Message</button>\n                {\n                    state.messages.map(message => (\n                    <div key={message.createdAt}>\n                        <h2>{message.amount}</h2>\n                        <h3>From: {message.address}</h3>\n                        <p>Date: {message.createdAt}</p>\n                    </div>\n                    ))\n                }\n            </div>\n            </main>\n          </>\n      )\n}\n\nexport default PeerToPeer;"]},"metadata":{},"sourceType":"module"}