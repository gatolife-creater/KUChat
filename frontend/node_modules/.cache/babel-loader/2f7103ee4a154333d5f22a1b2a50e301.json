{"ast":null,"code":"var _jsxFileName = \"/Users/kamei/Desktop/Programs/Blockchain Project/KUChat/frontend/src/components/pages/TransactionPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport NavBar from \"../parts/NavBar\";\nimport ChatHeader from \"../parts/ChatHeader\";\nimport QRCodeReader from \"../parts/QRCodeReader\";\nimport { useLocation } from \"react-router-dom\";\nimport getQueries from \"../../js/getQueries\";\nimport getCommunicationHistory from \"../../js/getCommunicationHistory\";\nimport isURL from \"../../js/isURL\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst TransactionPage = props => {\n  _s();\n\n  const {\n    blockchain\n  } = props;\n  const [state, setState] = useState(false);\n  let location = useLocation();\n  let queries = getQueries(location);\n  const [rightAddress, setMessage] = useState(\"\");\n  useEffect(() => {\n    fetch(\"/get-address\").then(res => res.json()).then(data => setMessage(data.public));\n  }, []);\n  const leftAddress = queries.address;\n  let tmpTransactions = getCommunicationHistory(blockchain, leftAddress, rightAddress);\n\n  if (!queries.address) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: rightAddress ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container position-absolute top-50 start-50 translate-middle\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              style: {\n                width: \"100%\",\n                margin: \"0 auto\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"search\",\n                  className: \"form-control\",\n                  name: \"address\",\n                  placeholder: \"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\\u9001\\u4FE1\\u5148\\u306E\\u30A2\\u30C9\\u30EC\\u30B9\\u3092\\u5165\\u529B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 40,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-primary\",\n                  type: \"submit\",\n                  children: \"\\u6C7A\\u5B9A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 41,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 39,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success\",\n              onClick: () => setState(!state),\n              \"data-bs-toggle\": \"modal\",\n              \"data-bs-target\": \"#exampleModal\",\n              style: {\n                display: \"block\",\n                width: \"134px\",\n                height: \"134px\",\n                margin: \"0 auto\",\n                marginTop: \"30px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-qr-code-scan\",\n                style: {\n                  fontSize: \"5em\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 45,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal fade\",\n            id: \"exampleModal\",\n            tabIndex: \"-1\",\n            \"aria-labelledby\": \"exampleModalLabel\",\n            \"aria-hidden\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-dialog\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"modal-title\",\n                    id: \"exampleModalLabel\",\n                    children: \"QR Code \\u30EA\\u30FC\\u30C0\\u30FC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 53,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn-close\",\n                    \"data-bs-dismiss\": \"modal\",\n                    \"aria-label\": \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 54,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 52,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-body\",\n                  children: state ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(QRCodeReader, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 58,\n                      columnNumber: 69\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"target-rect\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 59,\n                      columnNumber: 69\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-footer\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-secondary\",\n                    \"data-bs-dismiss\": \"modal\",\n                    children: \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"center\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Please sign in or sign up.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/signin\",\n              className: \"btn btn-lg btn-primary mt-5\",\n              children: \"Sign in / Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 41\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  } else if (queries.address) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: rightAddress ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ChatHeader, {\n          className: \"chat-header\",\n          address: queries.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          className: \"chat-main\",\n          children: tmpTransactions.map(transaction => transaction.fromAddress === rightAddress ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-sentence chat-sentence-right\",\n            children: isURL(transaction.message) ? /*#__PURE__*/_jsxDEV(\"a\", {\n              href: transaction.message,\n              target: \"_blank\",\n              children: transaction.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 122\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: transaction.message\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 88\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-sentence chat-sentence-left\",\n            children: transaction.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 87\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-footer\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              method: \"post\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"toAddress\",\n                value: queries.address,\n                style: {\n                  display: \"none\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"amount\",\n                value: \"100\",\n                style: {\n                  display: \"none\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-success\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-send-fill\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ChatHeader, {\n          className: \"chat-header\",\n          address: queries.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          className: \"chat-main\",\n          children: /*#__PURE__*/_jsxDEV(\"center\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                color: \"white\"\n              },\n              children: \"Please sign in or sign up.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/signin\",\n              className: \"btn btn-lg btn-success mt-5\",\n              style: {\n                color: \"white\"\n              },\n              children: \"Sign in / Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true)\n    }, void 0, false);\n  }\n};\n\n_s(TransactionPage, \"RC3qdsAyKgpBvjx70otfXSbL5h8=\", false, function () {\n  return [useLocation];\n});\n\n_c = TransactionPage;\nexport default TransactionPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"TransactionPage\");","map":{"version":3,"sources":["/Users/kamei/Desktop/Programs/Blockchain Project/KUChat/frontend/src/components/pages/TransactionPage.jsx"],"names":["React","useState","useEffect","Link","NavBar","ChatHeader","QRCodeReader","useLocation","getQueries","getCommunicationHistory","isURL","TransactionPage","props","blockchain","state","setState","location","queries","rightAddress","setMessage","fetch","then","res","json","data","public","leftAddress","address","tmpTransactions","width","margin","display","height","marginTop","fontSize","map","transaction","fromAddress","message","color"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AAEA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,uBAAP,MAAoC,kCAApC;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;;;AAEA,MAAMC,eAAe,GAAIC,KAAD,IAAW;AAAA;;AAC/B,QAAM;AAACC,IAAAA;AAAD,MAAeD,KAArB;AAEA,QAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,KAAD,CAAlC;AACA,MAAIe,QAAQ,GAAGT,WAAW,EAA1B;AACA,MAAIU,OAAO,GAAGT,UAAU,CAACQ,QAAD,CAAxB;AAEA,QAAM,CAACE,YAAD,EAAeC,UAAf,IAA6BlB,QAAQ,CAAC,EAAD,CAA3C;AACAC,EAAAA,SAAS,CAAC,MAAI;AACVkB,IAAAA,KAAK,CAAC,cAAD,CAAL,CACCC,IADD,CACOC,GAAD,IAAOA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEOG,IAAD,IAAQL,UAAU,CAACK,IAAI,CAACC,MAAN,CAFxB;AAGH,GAJQ,EAIP,EAJO,CAAT;AAMA,QAAMC,WAAW,GAAGT,OAAO,CAACU,OAA5B;AAEA,MAAIC,eAAe,GAAGnB,uBAAuB,CAACI,UAAD,EAAaa,WAAb,EAA0BR,YAA1B,CAA7C;;AAEA,MAAG,CAACD,OAAO,CAACU,OAAZ,EAAoB;AAChB,wBACI;AAAA,8BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA,kBACKT,YAAY,gBAAG;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,8DAAf;AAAA,oCACI;AAAM,cAAA,KAAK,EAAE;AAACW,gBAAAA,KAAK,EAAE,MAAR;AAAgBC,gBAAAA,MAAM,EAAE;AAAxB,eAAb;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,kBAAf;AAAA,wCACI;AAAO,kBAAA,IAAI,EAAC,QAAZ;AAAqB,kBAAA,SAAS,EAAC,cAA/B;AAA8C,kBAAA,IAAI,EAAC,SAAnD;AAA6D,kBAAA,WAAW,EAAC;AAAzE;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAQ,kBAAA,SAAS,EAAC,yBAAlB;AAA4C,kBAAA,IAAI,EAAC,QAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eAOI;AAAQ,cAAA,SAAS,EAAC,iBAAlB;AAAoC,cAAA,OAAO,EAAE,MAAMf,QAAQ,CAAC,CAACD,KAAF,CAA3D;AAAqE,gCAAe,OAApF;AAA4F,gCAAe,eAA3G;AAA2H,cAAA,KAAK,EAAE;AAACiB,gBAAAA,OAAO,EAAC,OAAT;AAAkBF,gBAAAA,KAAK,EAAC,OAAxB;AAAiCG,gBAAAA,MAAM,EAAC,OAAxC;AAAiDF,gBAAAA,MAAM,EAAC,QAAxD;AAAkEG,gBAAAA,SAAS,EAAC;AAA5E,eAAlI;AAAA,qCACI;AAAG,gBAAA,SAAS,EAAC,oBAAb;AAAkC,gBAAA,KAAK,EAAE;AAACC,kBAAAA,QAAQ,EAAC;AAAV;AAAzC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAaI;AAAK,YAAA,SAAS,EAAC,YAAf;AAA4B,YAAA,EAAE,EAAC,cAA/B;AAA8C,YAAA,QAAQ,EAAC,IAAvD;AAA4D,+BAAgB,mBAA5E;AAAgG,2BAAY,MAA5G;AAAA,mCACI;AAAK,cAAA,SAAS,EAAC,cAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,eAAf;AAAA,wCACI;AAAK,kBAAA,SAAS,EAAC,cAAf;AAAA,0CACI;AAAI,oBAAA,SAAS,EAAC,aAAd;AAA4B,oBAAA,EAAE,EAAC,mBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eAEI;AAAQ,oBAAA,IAAI,EAAC,QAAb;AAAsB,oBAAA,SAAS,EAAC,WAAhC;AAA4C,uCAAgB,OAA5D;AAAoE,kCAAW;AAA/E;AAAA;AAAA;AAAA;AAAA,0BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAKI;AAAK,kBAAA,SAAS,EAAC,YAAf;AAAA,4BACKpB,KAAK,gBAAG;AAAA,4CACG,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,4BADH,eAEG;AAAK,sBAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,4BAFH;AAAA,kCAAH,gBAII;AALd;AAAA;AAAA;AAAA;AAAA,wBALJ,eAYI;AAAK,kBAAA,SAAS,EAAC,cAAf;AAAA,yCACI;AAAQ,oBAAA,IAAI,EAAC,QAAb;AAAsB,oBAAA,SAAS,EAAC,mBAAhC;AAAoD,uCAAgB,OAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,wBAZJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAbJ;AAAA,wBAAH,gBAkCG;AAAA,iCACI;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,SAAT;AAAmB,cAAA,SAAS,EAAC,6BAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAnCpB;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA,oBADJ;AAgDH,GAjDD,MAiDM,IAAGG,OAAO,CAACU,OAAX,EAAmB;AACrB,wBACI;AAAA,gBACKT,YAAY,gBAAG;AAAA,gCACI,QAAC,UAAD;AAAY,UAAA,SAAS,EAAC,aAAtB;AAAoC,UAAA,OAAO,EAAED,OAAO,CAACU;AAArD;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAM,UAAA,SAAS,EAAC,WAAhB;AAAA,oBACKC,eAAe,CAACO,GAAhB,CAAqBC,WAAD,IACjBA,WAAW,CAACC,WAAZ,KAA4BnB,YAA5B,gBAA2C;AAAK,YAAA,SAAS,EAAC,mCAAf;AAAA,sBACMR,KAAK,CAAC0B,WAAW,CAACE,OAAb,CAAL,gBAA4B;AAAG,cAAA,IAAI,EAAEF,WAAW,CAACE,OAArB;AAA8B,cAAA,MAAM,EAAC,QAArC;AAAA,wBAA+CF,WAAW,CAACE;AAA3D;AAAA;AAAA;AAAA;AAAA,oBAA5B,gBACyB;AAAA,wBAAGF,WAAW,CAACE;AAAf;AAF/B;AAAA;AAAA;AAAA;AAAA,kBAA3C,gBAI0C;AAAK,YAAA,SAAS,EAAC,kCAAf;AAAA,sBAAmDF,WAAW,CAACE;AAA/D;AAAA;AAAA;AAAA;AAAA,kBAL7C;AADL;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAWI;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,mCACI;AAAM,cAAA,MAAM,EAAC,MAAb;AAAA,sCACI;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,SAAS,EAAC,cAA7B;AAA4C,gBAAA,IAAI,EAAC,WAAjD;AAA6D,gBAAA,KAAK,EAAErB,OAAO,CAACU,OAA5E;AAAqF,gBAAA,KAAK,EAAE;AAACI,kBAAAA,OAAO,EAAC;AAAT;AAA5F;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,SAAS,EAAC,cAA7B;AAA4C,gBAAA,IAAI,EAAC;AAAjD;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,SAAS,EAAC,cAA7B;AAA4C,gBAAA,IAAI,EAAC,QAAjD;AAA0D,gBAAA,KAAK,EAAC,KAAhE;AAAsE,gBAAA,KAAK,EAAE;AAACA,kBAAAA,OAAO,EAAC;AAAT;AAA7E;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAQ,gBAAA,IAAI,EAAC,QAAb;AAAsB,gBAAA,SAAS,EAAC,iBAAhC;AAAA,uCACI;AAAG,kBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAXJ;AAAA,sBAAH,gBAwBG;AAAA,gCACI,QAAC,UAAD;AAAY,UAAA,SAAS,EAAC,aAAtB;AAAoC,UAAA,OAAO,EAAEd,OAAO,CAACU;AAArD;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAM,UAAA,SAAS,EAAC,WAAhB;AAAA,iCACI;AAAA,oCACI;AAAI,cAAA,KAAK,EAAE;AAACY,gBAAAA,KAAK,EAAC;AAAP,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,SAAT;AAAmB,cAAA,SAAS,EAAC,6BAA7B;AAA2D,cAAA,KAAK,EAAE;AAACA,gBAAAA,KAAK,EAAC;AAAP,eAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAzBpB,qBADJ;AAsCH;AACJ,CA3GD;;GAAM5B,e;UAIaJ,W;;;KAJbI,e;AA6GN,eAAeA,eAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport NavBar from \"../parts/NavBar\";\nimport ChatHeader from \"../parts/ChatHeader\";\nimport QRCodeReader from \"../parts/QRCodeReader\";\n\nimport { useLocation } from \"react-router-dom\";\nimport getQueries from \"../../js/getQueries\";\nimport getCommunicationHistory from \"../../js/getCommunicationHistory\";\nimport isURL from \"../../js/isURL\";\n\nconst TransactionPage = (props) => {\n    const {blockchain} = props;\n\n    const [state, setState] = useState(false);\n    let location = useLocation();\n    let queries = getQueries(location);\n\n    const [rightAddress, setMessage] = useState(\"\");\n    useEffect(()=>{\n        fetch(\"/get-address\")\n        .then((res)=>res.json())\n        .then((data)=>setMessage(data.public));\n    },[])\n\n    const leftAddress = queries.address;\n\n    let tmpTransactions = getCommunicationHistory(blockchain, leftAddress, rightAddress);\n\n    if(!queries.address){\n        return(\n            <>\n                <NavBar/>\n                <main>\n                    {rightAddress?  <>\n                                        <div className=\"container position-absolute top-50 start-50 translate-middle\">\n                                            <form style={{width: \"100%\", margin: \"0 auto\"}}>\n                                                <div className=\"input-group mb-3\">\n                                                    <input type=\"search\" className=\"form-control\" name=\"address\" placeholder=\"メッセージ送信先のアドレスを入力\"/>\n                                                    <button className=\"btn btn-outline-primary\" type=\"submit\">決定</button>\n                                                </div>\n                                            </form>\n                                            <button className=\"btn btn-success\" onClick={() => setState(!state)} data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\" style={{display:\"block\", width:\"134px\", height:\"134px\", margin:\"0 auto\", marginTop:\"30px\"}}>\n                                                <i className=\"bi bi-qr-code-scan\" style={{fontSize:\"5em\"}}></i>\n                                            </button>\n                                        </div>\n                        \n                                        <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                                            <div className=\"modal-dialog\">\n                                                <div className=\"modal-content\">\n                                                    <div className=\"modal-header\">\n                                                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">QR Code リーダー</h5>\n                                                        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                                                    </div>\n                                                    <div className=\"modal-body\">\n                                                        {state ? <>\n                                                                    <QRCodeReader/>\n                                                                    <div className=\"target-rect\"/>\n                                                                </>\n                                                                : <></>}\n                                                    </div>\n                                                    <div className=\"modal-footer\">\n                                                        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </>\n                                :   <>\n                                        <center>\n                                            <h2>Please sign in or sign up.</h2>\n                                            <Link to=\"/signin\" className=\"btn btn-lg btn-primary mt-5\">Sign in / Sign up</Link>\n                                        </center> \n                                    </>}\n                    \n                </main>\n            </>\n        )\n    }else if(queries.address){\n        return(\n            <>\n                {rightAddress?  <>\n                                    <ChatHeader className=\"chat-header\" address={queries.address}/>\n                                    <main className=\"chat-main\">\n                                        {tmpTransactions.map((transaction)=>(\n                                            transaction.fromAddress === rightAddress ? <div className=\"chat-sentence chat-sentence-right\">\n                                                                                            {isURL(transaction.message)? <a href={transaction.message} target=\"_blank\">{transaction.message}</a>\n                                                                                                                    : <>{transaction.message}</>}\n                                                                                        </div>\n                                                                                    : <div className=\"chat-sentence chat-sentence-left\">{transaction.message}</div> \n                                        ))}\n                                    </main>\n                                    <footer>\n                                        <div className=\"chat-footer\">\n                                            <form method=\"post\">\n                                                <input type=\"text\" className=\"form-control\" name=\"toAddress\" value={queries.address} style={{display:\"none\"}}/>\n                                                <input type=\"text\" className=\"form-control\" name=\"message\"/>\n                                                <input type=\"text\" className=\"form-control\" name=\"amount\" value=\"100\" style={{display:\"none\"}}/>\n                                                <button type=\"submit\" className=\"btn btn-success\">\n                                                    <i className=\"bi bi-send-fill\"></i>\n                                                </button>\n                                            </form>\n                                        </div>\n                                    </footer>\n                                </>\n                            :   <>\n                                    <ChatHeader className=\"chat-header\" address={queries.address}/>\n                                    <main className=\"chat-main\">\n                                        <center>\n                                            <h2 style={{color:\"white\"}}>Please sign in or sign up.</h2>\n                                            <Link to=\"/signin\" className=\"btn btn-lg btn-success mt-5\" style={{color:\"white\"}}>Sign in / Sign up</Link>\n                                        </center> \n                                    </main>\n                                </>}\n                \n            </>\n        )\n    }  \n}\n\nexport default TransactionPage;"]},"metadata":{},"sourceType":"module"}